<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BedBooking Widget - Quick Console Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #1a1a1a;
            margin-bottom: 16px;
            font-size: 2rem;
        }

        .subtitle {
            color: #666;
            margin-bottom: 32px;
            font-size: 1.1rem;
        }

        .instructions {
            background: #f9fafb;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 24px;
            border-radius: 4px;
        }

        .instructions h3 {
            color: #1a1a1a;
            margin-bottom: 12px;
            font-size: 1.2rem;
        }

        .instructions ol {
            margin-left: 20px;
            line-height: 1.8;
            color: #333;
        }

        .instructions code {
            background: #e5e7eb;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #667eea;
        }

        .code-container {
            position: relative;
            margin-top: 24px;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 24px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            max-height: 600px;
            overflow-y: auto;
        }

        .copy-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .copy-btn:hover {
            background: #5568d3;
            transform: translateY(-1px);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        .copy-btn.copied {
            background: #10b981;
        }

        .test-btn {
            display: inline-block;
            background: #10b981;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin-top: 24px;
            transition: all 0.2s ease;
        }

        .test-btn:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 16px;
            margin-top: 24px;
            border-radius: 4px;
            color: #92400e;
        }

        .warning strong {
            display: block;
            margin-bottom: 8px;
            color: #78350f;
        }

        @media (max-width: 768px) {
            .container {
                padding: 24px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .subtitle {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ BedBooking Widget - Quick Test</h1>
        <p class="subtitle">Developer Console Injection - Instant Testing</p>

        <div class="instructions">
            <h3>üìã Kako Testirati Widget:</h3>
            <ol>
                <li>Otvorite <strong>bilo koju web stranicu</strong> (npr. google.com, va≈° sajt...)</li>
                <li>Pritisnite <code>F12</code> ili <code>Ctrl+Shift+I</code> za Developer Tools</li>
                <li>Kliknite na <code>Console</code> tab</li>
                <li>Kliknite "üìã Copy Code" dugme ispod</li>
                <li>Zalijepite kod u Console i pritisnite <code>Enter</code></li>
                <li>Widget ƒáe se pojaviti preko stranice</li>
            </ol>
        </div>

        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">üìã Copy Code</button>
            <div class="code-block">
                <pre><code id="widgetCode">// üè† BedBooking Widget - Instant Test
// Property: fg5nlt3aLlx4HWJeqliq | Unit: gMIOos56siO74VkCsSwY

(function() {
    'use strict';

    // Proveri da li vec postoji
    if (document.getElementById('bb-widget-overlay')) {
        console.warn('‚ö†Ô∏è Widget je vec otvoren!');
        return;
    }

    // Kreiraj overlay
    const overlay = document.createElement('div');
    overlay.id = 'bb-widget-overlay';
    overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.75);
        z-index: 2147483646;
        backdrop-filter: blur(4px);
        animation: fadeIn 0.3s ease;
    `;

    // Kreiraj beli container
    const container = document.createElement('div');
    container.id = 'bb-widget-container';
    container.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 95%;
        max-width: 1300px;
        height: 92vh;
        max-height: 950px;
        background: white;
        border-radius: 20px;
        box-shadow:
            0 25px 80px rgba(0, 0, 0, 0.5),
            0 0 1px rgba(0, 0, 0, 0.2);
        z-index: 2147483647;
        display: flex;
        flex-direction: column;
        animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    `;

    // Header sa kontrolama
    const header = document.createElement('div');
    header.style.cssText = `
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 24px 32px;
        border-bottom: 2px solid #f0f0f0;
        flex-shrink: 0;
    `;

    const title = document.createElement('div');
    title.innerHTML = `
        <h2 style="margin: 0; color: #1a1a1a; font-size: 1.5rem; font-weight: 700;">
            üè† BedBooking Widget Test
        </h2>
        <p style="margin: 4px 0 0 0; color: #666; font-size: 0.85rem;">
            Property: fg5nlt3aLlx4HWJeqliq | Unit: gMIOos56siO74VkCsSwY
        </p>
    `;

    const closeBtn = document.createElement('button');
    closeBtn.innerHTML = '‚úï';
    closeBtn.style.cssText = `
        background: #ef4444;
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        font-weight: bold;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    `;
    closeBtn.onmouseover = () => {
        closeBtn.style.background = '#dc2626';
        closeBtn.style.transform = 'scale(1.1) rotate(90deg)';
    };
    closeBtn.onmouseout = () => {
        closeBtn.style.background = '#ef4444';
        closeBtn.style.transform = 'scale(1) rotate(0deg)';
    };

    header.appendChild(title);
    header.appendChild(closeBtn);

    // Loading spinner
    const loadingDiv = document.createElement('div');
    loadingDiv.style.cssText = `
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 10;
    `;
    loadingDiv.innerHTML = `
        <div style="
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        "></div>
        <p style="margin-top: 16px; color: #666; font-size: 0.9rem;">Uƒçitavanje widgeta...</p>
    `;

    // Iframe wrapper
    const iframeWrapper = document.createElement('div');
    iframeWrapper.style.cssText = `
        flex: 1;
        padding: 24px 32px 32px 32px;
        overflow: hidden;
        position: relative;
    `;

    // Kreiraj iframe
    const iframe = document.createElement('iframe');
    iframe.src = 'https://rab-booking-widget.web.app/?property=fg5nlt3aLlx4HWJeqliq&unit=gMIOos56siO74VkCsSwY';
    iframe.style.cssText = `
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 12px;
        background: white;
        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);
    `;
    iframe.setAttribute('allow', 'payment');
    iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox');
    iframe.setAttribute('title', 'BedBooking Rezervacijski Widget');

    // Sakrij loading kad se uƒçita
    iframe.onload = () => {
        setTimeout(() => {
            loadingDiv.style.opacity = '0';
            loadingDiv.style.transition = 'opacity 0.3s ease';
            setTimeout(() => loadingDiv.remove(), 300);
        }, 500);
    };

    // Sastavi sve
    iframeWrapper.appendChild(loadingDiv);
    iframeWrapper.appendChild(iframe);
    container.appendChild(header);
    container.appendChild(iframeWrapper);
    document.body.appendChild(overlay);
    document.body.appendChild(container);

    // Animacije
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translate(-50%, -48%) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    `;
    document.head.appendChild(style);

    // Funkcija za zatvaranje
    const closeWidget = () => {
        container.style.animation = 'slideDown 0.3s ease forwards';
        overlay.style.animation = 'fadeOut 0.3s ease forwards';

        const closeStyle = document.createElement('style');
        closeStyle.textContent = `
            @keyframes slideDown {
                to {
                    opacity: 0;
                    transform: translate(-50%, -45%) scale(0.9);
                }
            }
            @keyframes fadeOut {
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(closeStyle);

        setTimeout(() => {
            container.remove();
            overlay.remove();
            style.remove();
            closeStyle.remove();
            console.log('üëã BedBooking Widget zatvoren');
        }, 300);
    };

    // Event listeners
    closeBtn.onclick = closeWidget;
    overlay.onclick = closeWidget;

    // ESC key
    const escHandler = (e) => {
        if (e.key === 'Escape' && document.getElementById('bb-widget-container')) {
            closeWidget();
            document.removeEventListener('keydown', escHandler);
        }
    };
    document.addEventListener('keydown', escHandler);

    // Responsive za mobile
    if (window.innerWidth <= 768) {
        container.style.width = '98%';
        container.style.height = '95vh';
        container.style.borderRadius = '16px';
        header.style.padding = '16px 20px';
        iframeWrapper.style.padding = '16px 20px 20px 20px';
        title.querySelector('h2').style.fontSize = '1.2rem';
        title.querySelector('p').style.fontSize = '0.75rem';
    }

    console.log('‚úÖ BedBooking Widget uƒçitan!');
    console.log('üí° Pritisnite ESC ili kliknite overlay za zatvaranje');
    console.log('üîó Widget URL: https://rab-booking-widget.web.app/?property=fg5nlt3aLlx4HWJeqliq&unit=gMIOos56siO74VkCsSwY');

})();</code></pre>
            </div>
        </div>

        <button class="test-btn" onclick="testWidget()">üöÄ Test na ovoj stranici</button>

        <div class="warning">
            <strong>‚ö° Quick Tips:</strong>
            ‚Ä¢ Pritisnite <code>ESC</code> ili kliknite overlay za zatvaranje<br>
            ‚Ä¢ Widget radi na bilo kojoj stranici<br>
            ‚Ä¢ Mo≈æete ga koristiti za live testiranje na produkciji<br>
            ‚Ä¢ Property ID i Unit ID su veƒá ukljuƒçeni
        </div>
    </div>

    <script>
        function copyCode(btn) {
            const code = document.getElementById('widgetCode').textContent;

            navigator.clipboard.writeText(code).then(() => {
                btn.textContent = '‚úì Kopirano!';
                btn.classList.add('copied');

                setTimeout(() => {
                    btn.textContent = 'üìã Copy Code';
                    btn.classList.remove('copied');
                }, 2000);
            }).catch(() => {
                // Fallback
                const textarea = document.createElement('textarea');
                textarea.value = code;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);

                btn.textContent = '‚úì Kopirano!';
                btn.classList.add('copied');

                setTimeout(() => {
                    btn.textContent = 'üìã Copy Code';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        function testWidget() {
            // Direktno izvr≈°ava kod na ovoj stranici
            eval(document.getElementById('widgetCode').textContent);
        }
    </script>
</body>
</html>
